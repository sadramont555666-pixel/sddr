# ๐ ุฑุงูููุง ุฑุงูโุงูุฏุงุฒ ุญุณุงุจ ุงุฏูู (ูุดุงูุฑ)

## ๐ฏ ูุฏู
ุงู ุฑุงูููุง ูุฑุงุญู ุณุงุฎุช ุงููู ุญุณุงุจ ฺฉุงุฑุจุฑ ุงุฏูู (ูุดุงูุฑ ุชุญุตู) ุฑุง ุฏุฑ ุณุงูุงูู ฺฏุฒุงุฑุดโฺฏุฑ ูุทุงูุนู ุชูุถุญ ูโุฏูุฏ.

---

## โ๏ธ ูพุดโูุงุฒูุง

### 1. ุชูุธู ูุชุบุฑูุง ูุญุท (.env)

ุฏุฑ ูุงู `.env` ูุงูุน ุฏุฑ `create/apps/web/.env`ุ ุฏู ูุชุบุฑ ุฒุฑ ุฑุง ุงุถุงูู ฺฉูุฏ:

```env
# ฺฉูุฏ ุงููุช ุจุฑุง ุงุญุฑุงุฒ ููุช ุฏุฑุฎูุงุณุช ุณุงุฎุช ุงุฏูู
ADMIN_SETUP_SECRET=your-very-secure-secret-key-here

# ุฑูุฒ ุนุจูุฑ ูพุดโูุฑุถ ุจุฑุง ุญุณุงุจ ุงุฏูู
DEFAULT_ADVISOR_PASSWORD=Your_Strong_Password_123
```

**ุชูุฌู ุงููุช:**
- ุงุฒ ฺฉ ฺฉูุฏ ูู ู ุชุตุงุฏู ุจุฑุง `ADMIN_SETUP_SECRET` ุงุณุชูุงุฏู ฺฉูุฏ
- ุฑูุฒ ุนุจูุฑ ุจุงุฏ ุญุฏุงูู ธ ฺฉุงุฑุงฺฉุชุฑ ู ุดุงูู ุญุฑูู ุจุฒุฑฺฏุ ฺฉูฺฺฉ ู ุงุนุฏุงุฏ ุจุงุดุฏ
- **ูฺโฺฏุงู** ุงู ููุงุฏุฑ ุฑุง ุฏุฑ Git commit ูฺฉูุฏ

### 2. ุฑุงูโุงูุฏุงุฒ ูุฌุฏุฏ ุณุฑูุฑ

ูพุณ ุงุฒ ุชุบุฑ `.env`ุ ุณุฑูุฑ ุฑุง ูุฌุฏุฏุงู ุฑุงูโุงูุฏุงุฒ ฺฉูุฏ:

```powershell
# ุฏุฑ ูุณุฑ create/apps/web
npm run dev
```

---

## ๐ ุณุงุฎุช ุญุณุงุจ ุงุฏูู

### ุฑูุด 1: ุงุณุชูุงุฏู ุงุฒ curl.exe (Windows PowerShell)

```powershell
curl.exe -X POST "http://localhost:4000/api/admin/create-advisor" `
  -H "x-admin-secret: your-very-secure-secret-key-here" `
  -H "Content-Type: application/json" `
  -d "{}"
```

### ุฑูุด 2: ุงุณุชูุงุฏู ุงุฒ Invoke-RestMethod (PowerShell Native)

```powershell
$headers = @{
    'x-admin-secret' = 'your-very-secure-secret-key-here'
    'Content-Type' = 'application/json'
}

Invoke-RestMethod -Uri 'http://localhost:4000/api/admin/create-advisor' `
  -Method Post `
  -Headers $headers `
  -Body '{}'
```

### ุฑูุด 3: ุงุณุชูุงุฏู ุงุฒ Postman ุง Insomnia

- **Method:** POST
- **URL:** `http://localhost:4000/api/admin/create-advisor`
- **Headers:**
  - `x-admin-secret`: `your-very-secure-secret-key-here`
  - `Content-Type`: `application/json`
- **Body:** `{}` (ุฎุงู)

---

## โ ูพุงุณุฎ ููููุชโุขูุฒ

ุงฺฏุฑ ุนููุงุช ูููู ุจุงุดุฏุ ูพุงุณุฎ ุฒุฑ ุฑุง ุฏุฑุงูุช ูโฺฉูุฏ:

```json
{
  "success": true,
  "message": "ุญุณุงุจ ุงุฏูู ุจุง ููููุช ุงุฌุงุฏ ุดุฏ",
  "user": {
    "id": "cmgjn81r40000uiig079papao",
    "name": "ุฎุงูู ุณูฺฏ ุดฺฉู (ูุดุงูุฑ ุชุญุตู)",
    "phone": "09923182082",
    "role": "ADMIN",
    "isVerified": true,
    "createdAt": "2025-10-09T16:39:51.520Z"
  }
}
```

ุงฺฏุฑ ุญุณุงุจ ูุจูุงู ูุฌูุฏ ุฏุงุดุชู ุจุงุดุฏุ ูพุงู ุชุบุฑ ูโฺฉูุฏ ุจู:
```json
{
  "message": "ุญุณุงุจ ุงุฏูู ุจุง ููููุช ุจูโุฑูุฒุฑุณุงู ุดุฏ"
}
```

---

## โ ุฎุทุงูุง ุงุญุชูุงู

### 1. ุฎุทุง 403 - ุฏุณุชุฑุณ ุบุฑูุฌุงุฒ

```json
{
  "error": "ุฏุณุชุฑุณ ุบุฑูุฌุงุฒ. ูุฏุฑ x-admin-secret ูุนุชุจุฑ ูุณุช."
}
```

**ุฑุงู ุญู:** ูุทูุฆู ุดูุฏ ฺฉู ููุฏุงุฑ `x-admin-secret` ุฏุฑ ุฏุฑุฎูุงุณุช ุจุง `ADMIN_SETUP_SECRET` ุฏุฑ `.env` ฺฉุณุงู ุงุณุช.

### 2. ุฎุทุง 500 - ูพฺฉุฑุจูุฏ ูุงุฏุฑุณุช

```json
{
  "error": "ุณุฑูุฑ ุจูโุฏุฑุณุช ูพฺฉุฑุจูุฏ ูุดุฏู ุงุณุช. ูุทูุงู ADMIN_SETUP_SECRET ุฑุง ุชูุธู ฺฉูุฏ."
}
```

**ุฑุงู ุญู:** ูุชุบุฑ `ADMIN_SETUP_SECRET` ุฑุง ุฏุฑ `.env` ุชูุธู ฺฉุฑุฏู ู ุณุฑูุฑ ุฑุง ุฑโุงุณุชุงุฑุช ฺฉูุฏ.

### 3. ุฎุทุง 409 - ุฏุงุฏู ุชฺฉุฑุงุฑ

```json
{
  "error": "ุงู ุดูุงุฑู ููุจุงู ูุจูุงู ุซุจุช ุดุฏู ุงุณุช.",
  "code": "DUPLICATE_ENTRY"
}
```

**ุฑุงู ุญู:** ุงู ุฎุทุง ูุจุงุฏ ุฑุฎ ุฏูุฏ ุฒุฑุง ฺฉุฏ ุจูโุตูุฑุช ุฎูุฏฺฉุงุฑ ุฑฺฉูุฑุฏ ููุฌูุฏ ุฑุง ุจูโุฑูุฒุฑุณุงู ูโฺฉูุฏ. ุงฺฏุฑ ุฏุฏุฏุ ุงุญุชูุงูุงู ูุดฺฉู ุฏุฑ ุฏุชุงุจุณ ูุฌูุฏ ุฏุงุฑุฏ.

### 4. ุฎุทุง ุฏุชุงุจุณ

```json
{
  "error": "ุฎุทุง ุฏุฑ ุงุชุตุงู ุจู ุฏุชุงุจุณ. ูุทูุงู ุชูุธูุงุช DATABASE_URL ุฑุง ุจุฑุฑุณ ฺฉูุฏ.",
  "code": "DB_CONNECTION_ERROR"
}
```

**ุฑุงู ุญู:** 
- ุจุฑุฑุณ ฺฉูุฏ PostgreSQL ุฏุฑ ุญุงู ุงุฌุฑุงุณุช
- `DATABASE_URL` ุฏุฑ `.env` ุฑุง ุจุฑุฑุณ ฺฉูุฏ
- ูุทูุฆู ุดูุฏ Prisma migrations ุงุฌุฑุง ุดุฏูโุงูุฏ: `npx prisma migrate deploy`

---

## ๐ ูุฑูุฏ ุจู ุญุณุงุจ ุงุฏูู

ูพุณ ุงุฒ ุณุงุฎุช ูููู ุญุณุงุจ ุงุฏูู:

1. ุจู ุตูุญู ูุฑูุฏ ุจุฑูุฏ: `http://localhost:4000/account/signin`
2. ุงุทูุงุนุงุช ุฒุฑ ุฑุง ูุงุฑุฏ ฺฉูุฏ:
   - **ุดูุงุฑู ููุจุงู:** `09923182082`
   - **ุฑูุฒ ุนุจูุฑ:** ููุงู ููุฏุงุฑ ฺฉู ุฏุฑ `DEFAULT_ADVISOR_PASSWORD` ุชูุธู ฺฉุฑุฏูโุงุฏ
3. ูพุณ ุงุฒ ูุฑูุฏ ููููุ ุจู ุฏุงุดุจูุฑุฏ ุงุฏูู ูุฏุงุช ูโุดูุฏ: `/admin`

---

## ๐ ูุดุฎุตุงุช ุญุณุงุจ ุงุฏูู ูพุดโูุฑุถ

- **ูุงู:** ุฎุงูู ุณูฺฏ ุดฺฉู (ูุดุงูุฑ ุชุญุตู)
- **ุดูุงุฑู ููุจุงู:** `09923182082`
- **ููุด:** `ADMIN`
- **ูุถุนุช:** ูุนุงู ู ุชุงุฏ ุดุฏู

---

## ๐ง ุนุจโุงุจ

### ุจุฑุฑุณ ูุงฺฏโูุง ุณุฑูุฑ

ุชูุงู ุฎุทุงูุง ุจุง ุฌุฒุฆุงุช ฺฉุงูู ุฏุฑ ฺฉูุณูู ุณุฑูุฑ ุซุจุช ูโุดููุฏ. ุงฺฏุฑ ุจุง ูุดฺฉู ููุงุฌู ุดุฏุฏ:

1. ฺฉูุณูู ฺฉู ุณุฑูุฑ ุฏุฑ ุขู ุงุฌุฑุง ูโุดูุฏ ุฑุง ุจุฑุฑุณ ฺฉูุฏ
2. ุจู ุฏูุจุงู ุฎุทูุท ุดุฑูุน ุดุฏู ุจุง `Admin creation/update error:` ุจฺฏุฑุฏุฏ
3. ุฌุฒุฆุงุช ฺฉุงูู ุฎุทุง ุดุงูู stack trace ููุงุด ุฏุงุฏู ูโุดูุฏ

### ุจุฑุฑุณ ุฏุชุงุจุณ

ุจุฑุง ุงุทููุงู ุงุฒ ุณุงุฎุช ููููุ ูโุชูุงูุฏ ูุณุชููุงู ุฏุชุงุจุณ ุฑุง ุจุฑุฑุณ ฺฉูุฏ:

```sql
SELECT id, name, phone, role, "isVerified", "createdAt"
FROM "User"
WHERE phone = '09923182082';
```

---

## ๐ ูฺฉุงุช ุงููุช

1. **ูุญุงูุธุช ุงุฒ ฺฉูุฏ:** ูพุณ ุงุฒ ุณุงุฎุช ุญุณุงุจ ุงุฏููุ ูโุชูุงูุฏ `ADMIN_SETUP_SECRET` ุฑุง ุงุฒ `.env` ุญุฐู ฺฉูุฏ ุชุง ุงุฒ ุฏุณุชุฑุณ ุบุฑูุฌุงุฒ ุฌููฺฏุฑ ุดูุฏ.

2. **ุชุบุฑ ุฑูุฒ ุนุจูุฑ:** ูพุณ ุงุฒ ุงููู ูุฑูุฏุ ุญุชูุงู ุฑูุฒ ุนุจูุฑ ุฑุง ุงุฒ ุทุฑู ูพูู ฺฉุงุฑุจุฑ ุชุบุฑ ุฏูุฏ.

3. **ูุญุท Production:** ุฏุฑ ูุญุท ุชููุฏุ ุญุชูุงู ุงุฒ HTTPS ุงุณุชูุงุฏู ฺฉูุฏ ู ฺฉูุฏูุง ุฑุง ุฏุฑ ฺฉ Secret Manager ุงูู ูฺฏูโุฏุงุฑ ฺฉูุฏ.

---

## ๐ ูพุดุชุจุงู

ุงฺฏุฑ ุจุง ูุดฺฉู ููุงุฌู ุดุฏุฏ ฺฉู ุฏุฑ ุงู ุฑุงูููุง ูพูุดุด ุฏุงุฏู ูุดุฏูุ ูุทูุงู:
- ูุงฺฏโูุง ฺฉุงูู ุณุฑูุฑ ุฑุง ุจุฑุฑุณ ฺฉูุฏ
- ุงุฒ ุตุญุช ุชูุธูุงุช `.env` ุงุทููุงู ุญุงุตู ฺฉูุฏ
- ุงุชุตุงู ุจู ุฏุชุงุจุณ ุฑุง ุชุณุช ฺฉูุฏ

---

**ุชุงุฑุฎ ุจูโุฑูุฒุฑุณุงู:** ฑธ ููุฑ ฑดฐด  
**ูุณุฎู API:** v1.0

