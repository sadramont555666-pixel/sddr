# Ø³ÛŒØ³ØªÙ… Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ù…Ø¯ÛŒØ±ÛŒØª ÙˆÛŒØ¯ÛŒÙˆ Ø¨Ø§ Link Preview

Ù…Ø³ØªÙ†Ø¯Ø§Øª Ú©Ø§Ù…Ù„ Ú†Ù‡Ø§Ø± Ù‚Ø§Ø¨Ù„ÛŒØª Ø¬Ø¯ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ø¨Ù‡Ø¨ÙˆØ¯ ØªØ¬Ø±Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø±ÛŒ

## ğŸ“‹ ÙÙ‡Ø±Ø³Øª

1. [Ø®Ù„Ø§ØµÙ‡ ØªØºÛŒÛŒØ±Ø§Øª](#Ø®Ù„Ø§ØµÙ‡-ØªØºÛŒÛŒØ±Ø§Øª)
2. [Ù…Ø±Ø­Ù„Ù‡ Û±: Link Unfurling (Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ Ø®ÙˆØ¯Ú©Ø§Ø± Ù„ÛŒÙ†Ú©)](#Ù…Ø±Ø­Ù„Ù‡-Û±-link-unfurling)
3. [Ù…Ø±Ø­Ù„Ù‡ Û²: Ú†ÛŒØ¯Ù…Ø§Ù† Ø´Ø¨Ú©Ù‡â€ŒØ§ÛŒ Ø³Ù‡ Ø³ØªÙˆÙ†Ù‡](#Ù…Ø±Ø­Ù„Ù‡-Û²-Ú†ÛŒØ¯Ù…Ø§Ù†-Ø´Ø¨Ú©Ù‡Ø§ÛŒ-Ø³Ù‡-Ø³ØªÙˆÙ†Ù‡)
4. [Ù…Ø±Ø­Ù„Ù‡ Û³: Ø³ØªÙˆÙ† Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø¯Ø± Ø¬Ø¯ÙˆÙ„](#Ù…Ø±Ø­Ù„Ù‡-Û³-Ø³ØªÙˆÙ†-Ø¯Ø³ØªÙ‡Ø¨Ù†Ø¯ÛŒ-Ø¯Ø±-Ø¬Ø¯ÙˆÙ„)
5. [Ù…Ø±Ø­Ù„Ù‡ Û´: ÙÛŒÙ„ØªØ± Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ](#Ù…Ø±Ø­Ù„Ù‡-Û´-ÙÛŒÙ„ØªØ±-Ø¯Ø³ØªÙ‡Ø¨Ù†Ø¯ÛŒ)
6. [Testing](#testing)

---

## ğŸ¯ Ø®Ù„Ø§ØµÙ‡ ØªØºÛŒÛŒØ±Ø§Øª

### **Ù‚Ø§Ø¨Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯:**

1. âœ… **Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ Ø®ÙˆØ¯Ú©Ø§Ø± Ù„ÛŒÙ†Ú©** - Ù…Ø´Ø§Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù…
2. âœ… **Ú†ÛŒØ¯Ù…Ø§Ù† Ø´Ø¨Ú©Ù‡â€ŒØ§ÛŒ Ø³Ù‡ Ø³ØªÙˆÙ†Ù‡** - Ø¯Ø± Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²
3. âœ… **Ø³ØªÙˆÙ† Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ** - Ø¯Ø± Ø¬Ø¯ÙˆÙ„ Ù¾Ù†Ù„ Ø§Ø¯Ù…ÛŒÙ†
4. âœ… **ÙÛŒÙ„ØªØ± Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ** - dropdown Ø¯Ø± Ù¾Ù†Ù„ Ø§Ø¯Ù…ÛŒÙ†

---

## ğŸ”— Ù…Ø±Ø­Ù„Ù‡ Û±: Link Unfurling (Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ Ø®ÙˆØ¯Ú©Ø§Ø± Ù„ÛŒÙ†Ú©)

### 1.1. Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Database Schema

**ÙØ§ÛŒÙ„:** `prisma/schema.prisma`

**ØªØºÛŒÛŒØ±Ø§Øª:**
```prisma
model Video {
  id                 String   @id @default(cuid())
  title              String   // Ø¹Ù†ÙˆØ§Ù† Ø§ØµÙ„ÛŒ Ú©Ù‡ Ø§Ø¯Ù…ÛŒÙ† ÙˆØ§Ø±Ø¯ Ù…ÛŒâ€ŒÚ©Ù†Ø¯
  category           String
  videoUrl           String   // Ù„ÛŒÙ†Ú© ÛŒÙˆØªÛŒÙˆØ¨
  thumbnailUrl       String?  // Ø¹Ú©Ø³ Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø´Ø¯Ù‡ â† Ø¬Ø¯ÛŒØ¯
  videoTitle         String?  // Ø¹Ù†ÙˆØ§Ù† Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø´Ø¯Ù‡ Ø§Ø² Ù„ÛŒÙ†Ú© â† Ø¬Ø¯ÛŒØ¯
  videoDescription   String?  // ØªÙˆØ¶ÛŒØ­Ø§Øª Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø´Ø¯Ù‡ Ø§Ø² Ù„ÛŒÙ†Ú© â† Ø¬Ø¯ÛŒØ¯
  createdAt          DateTime @default(now())

  uploadedBy   User   @relation(fields: [uploadedById], references: [id])
  uploadedById String
}
```

**Migration:**
```bash
npx prisma migrate dev --name add_video_link_preview_fields
```

---

### 1.2. API Endpoint: Unfurl Link

**Ù…Ø³ÛŒØ±:** `POST /api/admin/unfurl-link`

**Ú©Ø§Ø±Ø¨Ø±Ø¯:** Ø§Ø³ØªØ®Ø±Ø§Ø¬ metadata Ø§Ø² URL (Open Graph tags)

**Dependencies:**
- `jsdom` (Ø¨Ø±Ø§ÛŒ HTML parsing)

**Request:**
```json
{
  "url": "https://www.youtube.com/watch?v=dQw4w9WgXcQ"
}
```

**Response (Success):**
```json
{
  "title": "Rick Astley - Never Gonna Give You Up",
  "description": "The official video...",
  "image": "https://img.youtube.com/vi/dQw4w9WgXcQ/maxresdefault.jpg",
  "videoId": "dQw4w9WgXcQ",
  "platform": "youtube"
}
```

**ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§:**
- âœ… Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ø®ÙˆØ¯Ú©Ø§Ø± YouTube URLs
- âœ… Ø§Ø³ØªØ®Ø±Ø§Ø¬ thumbnail Ø¨Ø§ Ú©ÛŒÙÛŒØª Ø¨Ø§Ù„Ø§ (`maxresdefault.jpg`)
- âœ… Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² Open Graph tags
- âœ… Fallback Ø¨Ø±Ø§ÛŒ Ù„ÛŒÙ†Ú©â€ŒÙ‡Ø§ÛŒ ØºÛŒØ± YouTube
- âœ… Error handling Ú©Ø§Ù…Ù„

**Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ:**
```javascript
// src/app/api/admin/unfurl-link/route.js
import { JSDOM } from 'jsdom';

// Extract YouTube video ID
function getYouTubeVideoId(url) {
  const patterns = [
    /(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([^&\n?#]+)/,
    /youtube\.com\/shorts\/([^&\n?#]+)/,
  ];
  
  for (const pattern of patterns) {
    const match = url.match(pattern);
    if (match && match[1]) {
      return match[1];
    }
  }
  return null;
}

// Fetch metadata from URL
async function fetchMetadata(url) {
  const response = await fetch(url, {
    headers: {
      'User-Agent': 'Mozilla/5.0...',
    },
  });

  const html = await response.text();
  const dom = new JSDOM(html);
  const document = dom.window.document;

  // Extract Open Graph tags
  const getMetaContent = (property) => {
    const meta = document.querySelector(`meta[property="${property}"]`) ||
                 document.querySelector(`meta[name="${property}"]`);
    return meta?.getAttribute('content') || null;
  };

  return {
    title: getMetaContent('og:title'),
    description: getMetaContent('og:description'),
    image: getMetaContent('og:image'),
  };
}
```

---

### 1.3. Frontend: ÙØ±Ù… Ø§ÙØ²ÙˆØ¯Ù† ÙˆÛŒØ¯ÛŒÙˆ Ø¨Ø§ Preview

**ÙØ§ÛŒÙ„:** `src/app/admin/videos/page.tsx`

**ØªØºÛŒÛŒØ±Ø§Øª:**

#### State Management:
```tsx
const [linkPreview, setLinkPreview] = useState<LinkPreview>(null);
const [fetchingPreview, setFetchingPreview] = useState(false);

type LinkPreview = {
  title: string | null;
  description: string | null;
  image: string | null;
  platform?: string;
} | null;
```

#### Fetch Function:
```tsx
const fetchLinkPreview = async (url: string) => {
  setFetchingPreview(true);
  
  try {
    const response = await fetch('/api/admin/unfurl-link', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      credentials: 'include',
      body: JSON.stringify({ url: url.trim() }),
    });

    if (response.ok) {
      const data = await response.json();
      setLinkPreview(data);
      
      // Auto-fill form
      setForm(prev => ({
        ...prev,
        thumbnailUrl: data.image || undefined,
        videoTitle: data.title || undefined,
        videoDescription: data.description || undefined,
      }));
    }
  } catch (error) {
    setLinkPreview(null);
  } finally {
    setFetchingPreview(false);
  }
};
```

#### UI Component (Input Ø¨Ø§ onBlur):
```tsx
<input
  type="url"
  value={form.videoUrl}
  onChange={(e) => setForm({ ...form, videoUrl: e.target.value })}
  onBlur={(e) => fetchLinkPreview(e.target.value)}
  placeholder="https://www.youtube.com/watch?v=..."
  dir="ltr"
/>

{/* Loading State */}
{fetchingPreview && (
  <div className="mt-3 p-4 border border-gray-200 rounded-lg animate-pulse">
    Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´...
  </div>
)}

{/* Preview Card (Ù…Ø´Ø§Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù…) */}
{linkPreview && !fetchingPreview && (
  <div className="mt-3 border border-gray-200 rounded-lg overflow-hidden bg-white shadow-sm">
    {linkPreview.image && (
      <img
        src={linkPreview.image}
        alt="Preview"
        className="w-full h-48 object-cover"
      />
    )}
    <div className="p-4">
      {linkPreview.title && (
        <h4 className="font-semibold text-gray-800 mb-1">
          {linkPreview.title}
        </h4>
      )}
      {linkPreview.description && (
        <p className="text-sm text-gray-600 line-clamp-2">
          {linkPreview.description}
        </p>
      )}
      {linkPreview.platform && (
        <span className="inline-flex items-center gap-1 px-2 py-1 bg-red-100 text-red-700 text-xs rounded-full mt-2">
          {linkPreview.platform}
        </span>
      )}
    </div>
  </div>
)}
```

---

### 1.4. Backend: Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Preview

**ÙØ§ÛŒÙ„:** `src/server/controllers/admin/videos.ts`

**Schema Validation:**
```typescript
const videoBodySchema = z.object({
  title: z.string().min(1).max(200),
  category: z.string().min(1).max(100),
  videoUrl: z.string().url(),
  thumbnailUrl: z.string().optional(),      // â† Ø¬Ø¯ÛŒØ¯
  videoTitle: z.string().optional(),        // â† Ø¬Ø¯ÛŒØ¯
  videoDescription: z.string().optional(),  // â† Ø¬Ø¯ÛŒØ¯
});
```

**Create Video:**
```typescript
const video = await prisma.video.create({
  data: {
    title: data.title,
    category: data.category,
    videoUrl: data.videoUrl,
    thumbnailUrl: data.thumbnailUrl,        // â† Ø¬Ø¯ÛŒØ¯
    videoTitle: data.videoTitle,            // â† Ø¬Ø¯ÛŒØ¯
    videoDescription: data.videoDescription, // â† Ø¬Ø¯ÛŒØ¯
    uploadedById: adminId,
  },
});
```

---

## ğŸ“ Ù…Ø±Ø­Ù„Ù‡ Û²: Ú†ÛŒØ¯Ù…Ø§Ù† Ø´Ø¨Ú©Ù‡â€ŒØ§ÛŒ Ø³Ù‡ Ø³ØªÙˆÙ†Ù‡

**ÙˆØ¶Ø¹ÛŒØª:** âœ… **Ù‚Ø¨Ù„Ø§Ù‹ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø´Ø¯Ù‡**

**ÙØ§ÛŒÙ„:** `src/app/videos/page.jsx` (Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²)

**Ú©Ø¯ Ù…ÙˆØ¬ÙˆØ¯:**
```jsx
<div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
  {videos.map((video) => (
    <div key={video.id} className="bg-white rounded-xl...">
      {/* Video Card */}
    </div>
  ))}
</div>
```

**Ù†ØªÛŒØ¬Ù‡:**
- ğŸ“± **Mobile:** 1 Ø³ØªÙˆÙ†
- ğŸ“± **Tablet:** 2 Ø³ØªÙˆÙ†
- ğŸ–¥ï¸ **Desktop:** 3 Ø³ØªÙˆÙ†

---

## ğŸ“Š Ù…Ø±Ø­Ù„Ù‡ Û³: Ø³ØªÙˆÙ† Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø¯Ø± Ø¬Ø¯ÙˆÙ„

**ÙˆØ¶Ø¹ÛŒØª:** âœ… **Ù‚Ø¨Ù„Ø§Ù‹ Ù…ÙˆØ¬ÙˆØ¯**

**ÙØ§ÛŒÙ„:** `src/app/admin/videos/page.tsx`

**Ú©Ø¯ Ù…ÙˆØ¬ÙˆØ¯:**
```tsx
<thead>
  <tr>
    <th>Ø¹Ù†ÙˆØ§Ù†</th>
    <th>Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ</th>  {/* â† Ù‚Ø¨Ù„Ø§Ù‹ Ù…ÙˆØ¬ÙˆØ¯ */}
    <th>Ø¢Ù¾Ù„ÙˆØ¯Ú©Ù†Ù†Ø¯Ù‡</th>
    <th>ØªØ§Ø±ÛŒØ®</th>
    <th>Ø¹Ù…Ù„ÛŒØ§Øª</th>
  </tr>
</thead>
<tbody>
  {items.map((video) => (
    <tr key={video.id}>
      <td>{video.title}</td>
      <td>
        <span className="px-2 py-1 rounded-full text-xs bg-blue-100 text-blue-700">
          {video.category}
        </span>
      </td>
      <td>{video.uploadedBy?.name}</td>
      <td>{new Date(video.createdAt).toLocaleDateString('fa-IR')}</td>
      <td>{/* Actions */}</td>
    </tr>
  ))}
</tbody>
```

---

## ğŸ›ï¸ Ù…Ø±Ø­Ù„Ù‡ Û´: ÙÛŒÙ„ØªØ± Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ

### 4.1. Backend: API Filter Support

**ÙˆØ¶Ø¹ÛŒØª:** âœ… **Ù‚Ø¨Ù„Ø§Ù‹ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø´Ø¯Ù‡**

**ÙØ§ÛŒÙ„:** `src/server/controllers/admin/videos.ts`

**Ú©Ø¯ Ù…ÙˆØ¬ÙˆØ¯:**
```typescript
videosRouter.get('/', async (c) => {
  const { page, pageSize, category } = parsed.data;
  
  const where: any = {};
  if (category && category.trim()) {
    where.category = category.trim();  // â† ÙÛŒÙ„ØªØ± Ù…ÙˆØ¬ÙˆØ¯
  }

  const videos = await prisma.video.findMany({ where });
  // ...
});
```

---

### 4.2. Frontend Hook: Support for Category Parameter

**ÙØ§ÛŒÙ„:** `src/hooks/admin/useAdminChallengesVideos.ts`

**ØªØºÛŒÛŒØ±:**
```typescript
// Ù‚Ø¨Ù„:
export function useAdminVideos(page: number = 1) {
  return useQuery({
    queryKey: ['adminVideos', page],
    queryFn: async () => {
      const res = await fetch(`/api/admin/videos?page=${page}`);
      // ...
    },
  });
}

// Ø¨Ø¹Ø¯:
export function useAdminVideos(page: number = 1, category?: string) {
  return useQuery({
    queryKey: ['adminVideos', page, category],  // â† category added
    queryFn: async () => {
      const params = new URLSearchParams({ page: page.toString() });
      if (category && category !== 'all') {
        params.append('category', category);  // â† ÙÛŒÙ„ØªØ±
      }
      const res = await fetch(`/api/admin/videos?${params.toString()}`);
      // ...
    },
  });
}
```

---

### 4.3. Frontend UI: Dropdown Filter

**ÙØ§ÛŒÙ„:** `src/app/admin/videos/page.tsx`

**State:**
```tsx
const [selectedCategory, setSelectedCategory] = useState<string>('all');
const { data, isLoading } = useAdminVideos(page, selectedCategory);

const categories = [
  { value: 'all', label: 'Ù‡Ù…Ù‡ Ø¯Ø³ØªÙ‡â€ŒÙ‡Ø§' },
  { value: 'Ø¢Ù…ÙˆØ²Ø´ÛŒ', label: 'Ø¢Ù…ÙˆØ²Ø´ÛŒ' },
  { value: 'Ø§Ù†Ú¯ÛŒØ²Ø´ÛŒ', label: 'Ø§Ù†Ú¯ÛŒØ²Ø´ÛŒ' },
  { value: 'ØªÚ©Ù†ÛŒÚ© Ù…Ø·Ø§Ù„Ø¹Ù‡', label: 'ØªÚ©Ù†ÛŒÚ© Ù…Ø·Ø§Ù„Ø¹Ù‡' },
  { value: 'Ù…Ø¯ÛŒØ±ÛŒØª Ø²Ù…Ø§Ù†', label: 'Ù…Ø¯ÛŒØ±ÛŒØª Ø²Ù…Ø§Ù†' },
  { value: 'Ø±ÙˆØ§Ù†Ø´Ù†Ø§Ø³ÛŒ', label: 'Ø±ÙˆØ§Ù†Ø´Ù†Ø§Ø³ÛŒ' },
];
```

**UI Component:**
```tsx
<div className="mb-6 flex items-center gap-3">
  <label className="text-sm font-medium text-gray-700">
    ÙÛŒÙ„ØªØ± Ø¨Ø± Ø§Ø³Ø§Ø³ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ:
  </label>
  <select
    value={selectedCategory}
    onChange={(e) => {
      setSelectedCategory(e.target.value);
      setPage(1); // Reset to first page
    }}
    className="px-4 py-2 border rounded-lg..."
  >
    {categories.map((cat) => (
      <option key={cat.value} value={cat.value}>
        {cat.label}
      </option>
    ))}
  </select>
  {selectedCategory !== 'all' && (
    <span className="text-sm text-gray-500">
      ({total} ÙˆÛŒØ¯ÛŒÙˆ)
    </span>
  )}
</div>
```

**Ø±ÙØªØ§Ø±:**
1. Ú©Ø§Ø±Ø¨Ø± Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ù…ÛŒâ€ŒÚ©Ù†Ø¯
2. `selectedCategory` state Ø¨Ù‡â€ŒØ±ÙˆØ² Ù…ÛŒâ€ŒØ´ÙˆØ¯
3. Hook Ø¨Ø§ `category` Ø¬Ø¯ÛŒØ¯ refetch Ù…ÛŒâ€ŒÚ©Ù†Ø¯
4. Ø¬Ø¯ÙˆÙ„ ÙÙ‚Ø· ÙˆÛŒØ¯ÛŒÙˆÙ‡Ø§ÛŒ ÙÛŒÙ„ØªØ± Ø´Ø¯Ù‡ Ø±Ø§ Ù†Ù…Ø§ÛŒØ´ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯
5. ØµÙØ­Ù‡ Ø¨Ù‡ 1 reset Ù…ÛŒâ€ŒØ´ÙˆØ¯

---

## ğŸ§ª Testing

### 1. ØªØ³Øª Link Preview

```bash
# 1. Ø§ÙØ²ÙˆØ¯Ù† ÙˆÛŒØ¯ÛŒÙˆ Ø¬Ø¯ÛŒØ¯ Ø¯Ø± /admin/videos
# 2. ÙˆØ§Ø±Ø¯ Ú©Ø±Ø¯Ù† Ù„ÛŒÙ†Ú©: https://www.youtube.com/watch?v=dQw4w9WgXcQ
# 3. Ú©Ù„ÛŒÚ© Ø®Ø§Ø±Ø¬ Ø§Ø² input (onBlur)
# 4. Ø¨Ø±Ø±Ø³ÛŒ:
âœ“ Ú©Ø§Ø±Øª Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ØŸ
âœ“ Ø¹Ú©Ø³ thumbnail Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯ØŸ
âœ“ Ø¹Ù†ÙˆØ§Ù† Ùˆ ØªÙˆØ¶ÛŒØ­Ø§Øª Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ØŸ
âœ“ badge "youtube" ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯ØŸ
```

### 2. ØªØ³Øª ÙÛŒÙ„ØªØ± Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ

```bash
# 1. Ø±ÙØªÙ† Ø¨Ù‡ /admin/videos
# 2. Ø§Ù†ØªØ®Ø§Ø¨ "Ø¢Ù…ÙˆØ²Ø´ÛŒ" Ø§Ø² dropdown
# 3. Ø¨Ø±Ø±Ø³ÛŒ:
âœ“ ÙÙ‚Ø· ÙˆÛŒØ¯ÛŒÙˆÙ‡Ø§ÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ØŸ
âœ“ ØªØ¹Ø¯Ø§Ø¯ ÙˆÛŒØ¯ÛŒÙˆÙ‡Ø§ Ú©Ù†Ø§Ø± dropdown ØµØ­ÛŒØ­ Ø§Ø³ØªØŸ
âœ“ ØµÙØ­Ù‡ Ø¨Ù‡ 1 reset Ø´Ø¯ØŸ

# 4. ØªØºÛŒÛŒØ± Ø¨Ù‡ "Ù‡Ù…Ù‡ Ø¯Ø³ØªÙ‡â€ŒÙ‡Ø§"
âœ“ ØªÙ…Ø§Ù… ÙˆÛŒØ¯ÛŒÙˆÙ‡Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ØŸ
```

### 3. ØªØ³Øª API (cURL)

```bash
# Test unfurl-link
curl -X POST http://localhost:4000/api/admin/unfurl-link \
  -H "Content-Type: application/json" \
  -H "Cookie: authjs.session-token=..." \
  -d '{"url":"https://www.youtube.com/watch?v=dQw4w9WgXcQ"}' \
  | jq

# Expected response:
{
  "title": "Rick Astley - Never Gonna Give You Up",
  "description": "...",
  "image": "https://img.youtube.com/vi/dQw4w9WgXcQ/maxresdefault.jpg",
  "videoId": "dQw4w9WgXcQ",
  "platform": "youtube"
}

# Test category filter
curl "http://localhost:4000/api/admin/videos?category=Ø¢Ù…ÙˆØ²Ø´ÛŒ" \
  -H "Cookie: authjs.session-token=..." \
  | jq '.items[] | .category'

# Should only show "Ø¢Ù…ÙˆØ²Ø´ÛŒ"
```

---

## ğŸ“Š Ù…Ù‚Ø§ÛŒØ³Ù‡ Ù‚Ø¨Ù„ Ùˆ Ø¨Ø¹Ø¯

| ÙˆÛŒÚ˜Ú¯ÛŒ | Ù‚Ø¨Ù„ | Ø¨Ø¹Ø¯ |
|------|-----|-----|
| **ÙˆØ±ÙˆØ¯ Ù„ÛŒÙ†Ú©** | Manual typing | âœ… **Preview card** (Ù…Ø´Ø§Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù…) |
| **Thumbnail** | Generic placeholder | âœ… **Auto-extracted** (YouTube maxres) |
| **Metadata** | âŒ | âœ… **Title + Description** |
| **ÙÛŒÙ„ØªØ± Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ** | âŒ | âœ… **Dropdown filter** |
| **Ù†Ù…Ø§ÛŒØ´ ÙˆÛŒØ¯ÛŒÙˆÙ‡Ø§ (student)** | Variable | âœ… **3-column grid** |
| **Ø¬Ø¯ÙˆÙ„ Ø§Ø¯Ù…ÛŒÙ†** | Basic | âœ… **+ Category column** |

---

## ğŸš€ Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡!

Ù‡Ù…Ù‡ Ú†ÛŒØ² Ú©Ø§Ù…Ù„ Ø§Ø³Øª:

1. âœ… Database schema Ø¨Ù‡â€ŒØ±ÙˆØ² Ø´Ø¯Ù‡ (3 ÙÛŒÙ„Ø¯ Ø¬Ø¯ÛŒØ¯)
2. âœ… API endpoint `/api/admin/unfurl-link`
3. âœ… Frontend preview card (onBlur trigger)
4. âœ… Backend save metadata
5. âœ… Grid layout (3 columns)
6. âœ… Category filter dropdown
7. âœ… `jsdom` installed

**Ø¨Ø±Ø§ÛŒ ØªØ³Øª:**
```
http://localhost:4000/admin/videos
```

---

**Ù†Ø³Ø®Ù‡:** 1.0.0  
**ØªØ§Ø±ÛŒØ®:** 2025-10-11  
**ØªÙˆØ³Ø¹Ù‡â€ŒØ¯Ù‡Ù†Ø¯Ù‡:** Full-Stack Team

