# ๐ฑ ุฑุงูููุง Seed ฺฉุงุฑุจุฑ ุงุฏูู

## โ ุงุชูุงู ฺฉุงุฑ - Seed Script ุขูุงุฏู ุงุณุช!

ูุงู `prisma/seed.js` ุจุง ููููุช ุณุงุฎุชู ุดุฏ ู **ุชุณุช ุดุฏู** ุงุณุช.

## ๐ ูุดุฎุตุงุช ฺฉุงุฑุจุฑ ุงุฏูู ูพุดโูุฑุถ

| ููุฏ | ููุฏุงุฑ |
|------|-------|
| ๐ ุดูุงุฑู ููุจุงู (Username) | `09900314740` |
| ๐ ุฑูุฒ ุนุจูุฑ (Password) | `Admin@2024Strong` |
| ๐ง ุงูู | `admin@khanom-sangshekan.ir` |
| ๐ค ูุงู | `ุงุฏูู` |
| ๐ญ ููุด | `ADMIN` |

## ๐ ูุญูู ุงุฌุฑุง

### ุฑูุด ฑ: ุงุฌุฑุง ูุณุชูู (ุชูุตู ูโุดูุฏ)
```bash
node prisma/seed.js
```

### ุฑูุด ฒ: ุงุฒ ุทุฑู Prisma CLI
```bash
npx prisma db seed
```

### ุฑูุด ณ: ุงุฒ ุทุฑู npm script (ุงุฎุชุงุฑ)
```bash
npm run seed
```

## ๐ ุชูุธู ูุดุฎุตุงุช ุณูุงุฑุด (ุงุฎุชุงุฑ)

ูโุชูุงูุฏ ูุดุฎุตุงุช ุงุฏูู ุฑุง ุงุฒ ุทุฑู **ูุชุบุฑูุง ูุญุท** ุชุบุฑ ุฏูุฏ:

```bash
# ุฏุฑ ูุงู .env ุง ุฏุฑ Liara
ADMIN_PHONE=09123456789
ADMIN_PASSWORD=MySecurePassword123!
ADMIN_EMAIL=admin@example.com
ADMIN_NAME="ูุฏุฑ ุงุฑุดุฏ"
```

ุณูพุณ seed ุฑุง ุงุฌุฑุง ฺฉูุฏ:
```bash
node prisma/seed.js
```

## โจ ูฺฺฏโูุง Seed Script

### โ Idempotent (ุงูู ุจุฑุง ุงุฌุฑุง ูฺฉุฑุฑ)
- ุงฺฏุฑ ฺฉุงุฑุจุฑ ุงุฏูู ุงุฒ ูุจู ูุฌูุฏ ุฏุงุดุชู ุจุงุดุฏุ **ูฺ ฺฉุงุฑ ุงูุฌุงู ููโุฏูุฏ**
- ฺฉุงุฑุจุฑ ุชฺฉุฑุงุฑ ุงุฌุงุฏ **ููโุดูุฏ**
- ูโุชูุงูุฏ ุจุฏูู ูฺฏุฑุงู ฺูุฏู ุจุงุฑ ุงุฌุฑุง ฺฉูุฏ

### ๐ ุงููุช
- ูพุณูุฑุฏ ุจุง **argon2** (ููโุชุฑู ุงูฺฏูุฑุชู) ูุด ูโุดูุฏ
- ุงุทูุงุนุงุช ุญุณุงุณ ุฏุฑ ูุงฺฏ **ููุงุด ุฏุงุฏู ููโุดูุฏ** (ููุท ุฏุฑ ุงุฌุฑุง ุงูู)

### ๐ ูุงฺฏโูุง ูุงุถุญ
- **ุงุฌุฑุง ุงูู**: ุฌุฒุฆุงุช ฺฉุงูู ฺฉุงุฑุจุฑ ุณุงุฎุชู ุดุฏู
- **ุงุฌุฑุงูุง ุจุนุฏ**: ูพุงู "Admin already exists"

## ๐งช ูุชุงุฌ ุชุณุช

### โ ุชุณุช ฑ: ุงุฌุงุฏ ฺฉุงุฑุจุฑ ุฌุฏุฏ
```
๐ Admin user created successfully!
๐ Admin Details:
   ๐ค Name: ุงุฏูู
   ๐ Phone: 09900314740
   ๐ง Email: admin@khanom-sangshekan.ir
   ๐ Role: ADMIN
   ๐ ID: cmgqh4s2p0000uif4ru7vizay
   โ Status: ACTIVE
```

### โ ุชุณุช ฒ: Idempotency (ุงุฌุฑุง ูฺฉุฑุฑ)
```
โ Admin already exists. No action taken.
   ๐ Phone: 09900314740
   ๐ค Name: ุงุฏูู
   ๐ ID: cmgqh4s2p0000uif4ru7vizay
```

## ๐ ุงุณุชูุงุฏู ุฏุฑ Production (ุฑู ูุงุณุช)

### ูุฑุญูู ฑ: ุขูพููุฏ ฺฉุฏูุง
ฺฉู ูพุฑูฺู ุฑุง ุฑู ูุงุณุช (Liara/...) ุขูพููุฏ ฺฉูุฏ.

### ูุฑุญูู ฒ: ุงุฌุฑุง Migrations
```bash
npx prisma migrate deploy
```

### ูุฑุญูู ณ: ุงุฌุฑุง Seed
```bash
node prisma/seed.js
```

ุง ุงฺฏุฑ ุฏุฑ `package.json` ุงุณฺฉุฑูพุช seed ุชุนุฑู ฺฉุฑุฏุฏ:
```bash
npm run seed
```

### ูุฑุญูู ด: ุชุณุช ูุฑูุฏ
1. ุจู ุตูุญู ูุงฺฏู ุจุฑูุฏ
2. Username: `09900314740`
3. Password: `Admin@2024Strong`
4. ูุงุฑุฏ ุฏุงุดุจูุฑุฏ ุงุฏูู ุดูุฏ โ

## ๐ ุงุฌุฑุง ุฎูุฏฺฉุงุฑ ุฏุฑ Deploy

### ุจุฑุง Liara (ุงุฎุชุงุฑ)
ุฏุฑ ูุงู `liara.json`:
```json
{
  "platform": "node",
  "build": {
    "command": "npm run build"
  },
  "release": {
    "command": "npx prisma migrate deploy && node prisma/seed.js"
  }
}
```

### ุจุฑุง Vercel/Railway (ุงุฎุชุงุฑ)
ุฏุฑ `package.json` ุงุถุงูู ฺฉูุฏ:
```json
"scripts": {
  "postinstall": "npx prisma generate",
  "deploy": "npx prisma migrate deploy && node prisma/seed.js"
}
```

## ๐ก๏ธ ุงููุช ุฏุฑ Production

### โ๏ธ ููู: ูพุณูุฑุฏ ูพุดโูุฑุถ ุฑุง ุชุบุฑ ุฏูุฏ!

ูพุณ ุงุฒ ุงููู ูุฑูุฏ:
1. ูุงุฑุฏ **ูพูู ุงุฏูู** ุดูุฏ
2. ุจู **ุชูุธูุงุช ูพุฑููุงู** ุจุฑูุฏ
3. **ุฑูุฒ ุนุจูุฑ** ุฑุง ุชุบุฑ ุฏูุฏ
4. ฺฉ ูพุณูุฑุฏ ูู (ุญุฏุงูู 12 ฺฉุงุฑุงฺฉุชุฑ) ุงูุชุฎุงุจ ฺฉูุฏ

### ๐ ุชูุตูโูุง ุงููุช
- โ ุงุฒ ูุชุบุฑูุง ูุญุท ุจุฑุง production ุงุณุชูุงุฏู ฺฉูุฏ
- โ ูพุณูุฑุฏ ูพุดโูุฑุถ ุฑุง ุฏุฑ production ุชุบุฑ ุฏูุฏ
- โ ูุงู `.env` ุฑุง ุฏุฑ `.gitignore` ูุฑุงุฑ ุฏูุฏ
- โ ุงุทูุงุนุงุช ูุฑูุฏ ุฑุง ุฏุฑ ูฺฉุงู ุงูู ุฐุฎุฑู ฺฉูุฏ

## โ ุฑูุน ูุดฺฉูุงุช ุฑุงุฌ

### ุฎุทุง: "Cannot find module '@prisma/client'"
```bash
npm install
npx prisma generate
```

### ุฎุทุง: "Database connection error"
ุจุฑุฑุณ ฺฉูุฏ `DATABASE_URL` ุฏุฑ `.env` ุตุญุญ ุงุณุช:
```bash
echo $DATABASE_URL  # Linux/Mac
echo %DATABASE_URL% # Windows
```

### ุฎุทุง: "Password hashing failed"
ุจุฑุฑุณ ฺฉูุฏ `argon2` ูุตุจ ุดุฏู:
```bash
npm install argon2
```

### ฺฉุงุฑุจุฑ ุงุฏูู ุณุงุฎุชู ููโุดูุฏ
1. ูุงฺฏโูุง ุฑุง ุจุฑุฑุณ ฺฉูุฏ
2. `console.log` ููุฌูุฏ ุฏุฑ seed.js ุฑุง ุจุฎูุงูุฏ
3. ูุทูุฆู ุดูุฏ migration ุงุฌุฑุง ุดุฏู: `npx prisma migrate deploy`

## ๐ ูพุดุชุจุงู

ุงฺฏุฑ ูุดฺฉู ูพุด ุขูุฏ:
1. ูุงฺฏ ฺฉุงูู seed ุฑุง ุจุฑุฑุณ ฺฉูุฏ
2. ุงุฒ `node prisma/seed.js` ูุณุชูู ุงุณุชูุงุฏู ฺฉูุฏ
3. ุฏุชุงุจุณ ุฑุง ุจุฑุฑุณ ฺฉูุฏ:
   ```bash
   npx prisma studio
   ```

## ๐ ุงุฏุฏุงุดุช ููุง

โ **Seed script ุขูุงุฏู ู ุชุณุช ุดุฏู ุงุณุช**
- Idempotent โ
- ุงูู โ  
- ุจุง ูุงฺฏโูุง ูุงุถุญ โ
- ุณุงุฒฺฏุงุฑ ุจุง production โ

---

**๐ ูููู ุจุงุดุฏ! ฺฉุงุฑุจุฑ ุงุฏูู ุขูุงุฏู ุงุณุชูุงุฏู ุงุณุช.**

