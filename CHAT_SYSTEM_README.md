# ๐ฌ ุณุณุชู ฺุช ู ูุฏุฑุช ูุญุชูุง

## โ ฺฉุงุฑูุง ุงูุฌุงู ุดุฏู

### 1. Backend (API & Database)

#### **Prisma Schema**
- โ Model `ChatMessage` ุจุง ููุฏูุง ฺฉุงูู:
  - ูุญุชูุงุ ููุน (public/private)ุ ูุฑุณุชูุฏูุ ฺฏุฑูุฏู
  - ูุถุนุช (visible/hidden)ุ ูพุฑฺู profanity
  - ุฒูุงูโูุง (createdAt, updatedAt, deletedAt)
  
- โ Model `Profanity` ุจุฑุง ูุฏุฑุช ฺฉููุงุช ูุงููุงุณุจ
- โ Relations ฺฉุงูู ุจุง User model

#### **API Endpoints**

**ูพุงูโูุง:**
- โ `GET /api/messages` - ุฏุฑุงูุช ูพุงูโูุง (public/private)
- โ `POST /api/messages` - ุงุฑุณุงู ูพุงู ุฌุฏุฏ ุจุง ููุชุฑ profanity
- โ `PATCH /api/messages/[id]/hide` - ูุฎู ฺฉุฑุฏู ูพุงู (ุงุฏูู)
- โ `GET /api/chat` - backward compatible ุจุง ฺฉุฏ ูุฏู

**ฺฉููุงุช ูุงููุงุณุจ:**
- โ `GET /api/profanities` - ูุณุช ฺฉููุงุช (ุงุฏูู)
- โ `POST /api/profanities` - ุงูุฒูุฏู ฺฉููู (ุงุฏูู)
- โ `DELETE /api/profanities/[id]` - ุญุฐู ฺฉููู (ุงุฏูู)

**ฺฉุงุฑุจุฑุงู:**
- โ `GET /api/users` - ุฏุฑุงูุช ูุณุช ฺฉุงุฑุจุฑุงู ุจุง ููุชุฑ role

#### **ููุชุฑ ฺฉููุงุช ูุงููุงุณุจ**
- โ Utility: `src/server/utils/profanityFilter.js`
- โ ูุฑูุงูโุณุงุฒ ูุชู ูุงุฑุณ (ุชุจุฏู ุขโุงุ โุ ุญุฐู ูุงุตูู)
- โ Regex ูพุดุฑูุชู ุจุฑุง ุชุดุฎุต ุจุง ูุงุตูู/ููุทู ุจู ุญุฑูู
- โ ฺฉุด 5 ุฏูููโุง ุจุฑุง ุจูููโุณุงุฒ
- โ ุฌููฺฏุฑ ุงุฒ ุงุฑุณุงู ูพุงูโูุง ุญุงู ฺฉููุงุช ุจุฏ

#### **ุงููุช**
- โ Rate Limiting: ุญุฏุงฺฉุซุฑ 5 ูพุงู ุฏุฑ ุฏููู
- โ ูุญุฏูุฏุช ุทูู ูพุงู: 2000 ฺฉุงุฑุงฺฉุชุฑ
- โ Authentication ุจุง session
- โ Authorization (ุงุฏูู ุจุฑุง hide/profanity)

---

### 2. Frontend (UI Components)

#### **ฺฉุงููพูููุชโูุง ฺุช**
- โ `PublicChat.jsx` - ฺุช ุนููู ุจุง:
  - ุฏุฑุงูุช ู ููุงุด ูพุงูโูุง
  - ุงุฑุณุงู ูพุงู ุจุง validation
  - ููุงุด ุฎุทุง profanity
  - Auto-scroll ุจู ุขุฎุฑ
  - Polling ูุฑ 5 ุซุงูู (ุจุฏูู WebSocket)
  - UI ุฒุจุง ุจุง gradient ู avatar

- โ `PrivateChat.jsx` - ฺุช ุฎุตูุต ุจุง ูุดุงูุฑ:
  - ุงูุชู ุฎูุฏฺฉุงุฑ admin
  - UI ูุชูุงูุช ุจุฑุง ูพุงูโูุง ุงุฏูู
  - ููุงุด ูุถุนุช ููู ู ูุญุฑูุงูฺฏ

#### **ุตูุญุงุช**
- โ `/chat` - ุตูุญู ุงุตู ฺุช ุจุง tabs
  - ุญุฐู ุจุฎุด "ุฑุชุจูโุจุฑุชุฑูุง" ุทุจู ุฏุฑุฎูุงุณุช
  - ุฏู ุชุจ: ฺุช ุนููู + ูพุงู ุจู ูุดุงูุฑ
  - ุฑุงูููุง ุงุณุชูุงุฏู

- โ `/admin/chat-management` - ูพูู ูุฏุฑุช ุงุฏูู:
  - ูุณุช ุชูุงู ูพุงูโูุง
  - ุฏฺฉูู ูุฎู ฺฉุฑุฏู ูพุงู
  - ูุฏุฑุช ฺฉููุงุช ูุงููุงุณุจ (ุงูุฒูุฏู/ุญุฐู)
  - ุฏู ุชุจ: ูพุงูโูุง | ฺฉููุงุช

---

### 3. ูฺฺฏโูุง ุงุถุงู

- โ Seed script ุจุฑุง ฺฉููุงุช ูุงููุงุณุจ ุงููู
- โ Error handling ุฌุงูุน ุฏุฑ ููู endpoints
- โ Logging ฺฉุงูู ุจุฑุง debug
- โ UI responsive ุจุฑุง ููุจุงู
- โ ุงุณุชุงู ฺฉูพุงุฑฺู ุจุง Tailwind
- โ Font ูุงุฑุณ Vazirmatn

---

## ๐ ุชูุงูุชโูุง ุจุง ูุณุฎู ูุจู

### โ ุญุฐู ุดุฏู:
- โ ุจุฎุด "ุฑุชุจูโุจุฑุชุฑูุง" ุงุฒ `/chat` (ุทุจู ุฏุฑุฎูุงุณุช)
- โ SQL queries ุฎุงู
- โ ุฌุฏุงูู ูุฏู `chat_messages`

### โ ุฌุงฺฏุฒู ุดุฏู:
- โ Prisma ORM ุจู ุฌุง SQL
- โ Model `ChatMessage` ุฌุฏุฏ
- โ ููุชุฑ ฺฉููุงุช ูุงููุงุณุจ ูุงุฑุณ
- โ UI ูุฏุฑู ู ุฒุจุง

---

## ๐ ุฑุงูโุงูุฏุงุฒ

### 1. Migration ุฏุชุงุจุณ
```bash
cd create/apps/web
npx prisma db push
npx prisma generate
```

### 2. Seed ฺฉููุงุช ูุงููุงุณุจ ุงููู
```bash
node prisma/seed-profanity.js
```

### 3. ุงุฌุฑุง ุณุฑูุฑ
```bash
npm run dev
# ุง
pnpm dev
```

---

## ๐ ูุญูู ุงุณุชูุงุฏู

### ุจุฑุง ุฏุงูุดโุขููุฒุงู:
1. ูุฑูุฏ ุจู `/chat`
2. ุงูุชุฎุงุจ ุชุจ "ฺฏูุชโูฺฏู ุนููู" ุง "ูพุงู ุจู ูุดุงูุฑ"
3. ุงุฑุณุงู ูพุงู (ุญุฏุงฺฉุซุฑ 2000 ฺฉุงุฑุงฺฉุชุฑุ 5 ูพุงู ุฏุฑ ุฏููู)

### ุจุฑุง ูุฏุฑ:
1. ูุฑูุฏ ุจู `/admin/chat-management`
2. **ุชุจ ูพุงูโูุง**: ูุดุงูุฏู ู ูุฎู ฺฉุฑุฏู ูพุงูโูุง ูุงููุงุณุจ
3. **ุชุจ ฺฉููุงุช ูุงููุงุณุจ**: 
   - ุงูุฒูุฏู ฺฉููุงุช ุฌุฏุฏ
   - ุญุฐู ฺฉููุงุช ููุฌูุฏ
4. ูุดุงูุฏู ูพุงูโูุง ุฎุตูุต ุฏุฑ `PrivateChat`

---

## โ๏ธ ูฺฉุงุช ููู

### ุงููุช:
- โ ุชูุงู endpoints ุงุญุฑุงุฒ ููุช ุฏุงุฑูุฏ
- โ ููุท ุงุฏูู ูโุชูุงูุฏ ูพุงู ูุฎู ฺฉูุฏ
- โ Rate limiting ุจุฑุง ุฌููฺฏุฑ ุงุฒ spam
- โ ููุชุฑ ุฎูุฏฺฉุงุฑ ฺฉููุงุช ูุงููุงุณุจ

### ุนููฺฉุฑุฏ:
- โ ฺฉุด 5 ุฏูููโุง ุจุฑุง profanity list
- โ Polling ูุฑ 5 ุซุงูู (ูุนูุงู ุจุฏูู WebSocket)
- โ Query optimization ุจุง Prisma

### UX:
- โ ูพุงู ุฎุทุง ูุงุถุญ ุจุฑุง profanity
- โ Disabled state ุจุฑุง ุฏฺฉููโูุง
- โ Loading states
- โ Auto-scroll ุฏุฑ ฺุช

---

## ๐ฎ ูพุดููุงุฏุงุช ุจุฑุง ุขูุฏู (ุงุฎุชุงุฑ)

### WebSocket/Real-time
ูุนูุงู ุณุณุชู ุงุฒ **polling** (ุฏุฑุงูุช ูุฑ 5 ุซุงูู) ุงุณุชูุงุฏู ูโฺฉูุฏ ฺฉู ุจุฑุง ุชุนุฏุงุฏ ฺฉู ฺฉุงุฑุจุฑ ฺฉุงู ุงุณุช.

ุงฺฏุฑ ุฏุฑ ุขูุฏู ุจุฎูุงูุฏ WebSocket ุงุถุงูู ฺฉูุฏ:

1. ูุตุจ Socket.IO:
```bash
npm install socket.io socket.io-client
```

2. ุงุฌุงุฏ `src/server/socket.js` (ููููู ุฏุฑ ูพุฑุงููพุช ุงุตู ููุฌูุฏ ุงุณุช)

3. ุชุบุฑ `PublicChat` ู `PrivateChat` ุจู ุงุณุชูุงุฏู ุงุฒ socket events

**ูุฒุงุง:**
- โ ุจุฏูู ุชุฃุฎุฑ (instant)
- โ ฺฉุงูุด ุฏุฑุฎูุงุณุชโูุง HTTP

**ูุนุงุจ:**
- โ ูพฺุฏฺฏ ุจุดุชุฑ
- โ ูุงุฒ ุจู ุณุฑูุฑ ุฌุฏุงฺฏุงูู ุง ุชูุธูุงุช ุฎุงุต

---

## ๐ ุนุจโุงุจ

### ูพุงู ุงุฑุณุงู ููโุดูุฏ:
1. ุจุฑุฑุณ console browser (F12)
2. ุจุฑุฑุณ ูุงฺฏ ุณุฑูุฑ
3. ฺฺฉ ฺฉุฑุฏู ุงุชุตุงู ุฏุชุงุจุณ
4. ุจุฑุฑุณ session authentication

### ููุชุฑ ฺฉุงุฑ ููโฺฉูุฏ:
1. ุงุทููุงู ุงุฒ seed ุดุฏู ฺฉููุงุช: `node prisma/seed-profanity.js`
2. ุจุฑุฑุณ `/admin/chat-management` โ ุชุจ ฺฉููุงุช
3. ฺฺฉ ฺฉุฑุฏู ูุงฺฏ ุณุฑูุฑ ุจุฑุง ุฎุทุง profanity

### ุฎุทุง 500:
1. ุจุฑุฑุณ Prisma migration: `npx prisma db push`
2. ุจุฑุฑุณ ุงุชุตุงู PostgreSQL
3. ฺฺฉ ฺฉุฑุฏู ูุชุบุฑ `DATABASE_URL` ุฏุฑ `.env`

---

## ๐ ูพุดุชุจุงู

ุจุฑุง ุณูุงูุงุช ุง ูุดฺฉูุงุช:
- ุจุฑุฑุณ ูุงฺฏ ุณุฑูุฑ
- ุจุฑุฑุณ console ูุฑูุฑฺฏุฑ
- ูุทุงูุนู ุงู ูุณุชูุฏ

---

**ุชูุณุนูโุฏููุฏู:** AI Assistant  
**ุชุงุฑุฎ:** 2025  
**ูุณุฎู:** 1.0.0

